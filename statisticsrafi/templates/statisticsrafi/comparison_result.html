{% extends 'statisticsrafi/base.html' %}

{% block title %}{{ player1.name }} vs {{ player2.name }} - Comparison{% endblock %}

{% block content %}
<div class="text-center mb-2">
    <h1>âš–ï¸ Player Comparison</h1>
    <h2 style="color: var(--color-gray-600);">
        {{ player1.name }} <span style="color: var(--color-orange-300);">VS</span> {{ player2.name }}
    </h2>
    <p style="font-size: 1.1rem; color: var(--color-gray-600);">Season: {{ season }}</p>
</div>

<!-- Player Overview -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
    <div class="card">
        <div class="card-header" style="background: linear-gradient(135deg, var(--color-orange-300), var(--color-orange-400)); color: white;">
            {{ player1.name }}
        </div>
        <div style="padding: 1rem;">
            <p><strong>Club:</strong> {{ player1.club.name }}</p>
            <p><strong>Position:</strong> {{ player1.get_position_display }}</p>
            <p><strong>Nationality:</strong> {{ player1.nationality }}</p>
            <p><strong>Market Value:</strong> â‚¬{{ player1.market_value|default:"N/A" }}M</p>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header" style="background: linear-gradient(135deg, var(--color-gray-800), var(--color-gray-1000)); color: white;">
            {{ player2.name }}
        </div>
        <div style="padding: 1rem;">
            <p><strong>Club:</strong> {{ player2.club.name }}</p>
            <p><strong>Position:</strong> {{ player2.get_position_display }}</p>
            <p><strong>Nationality:</strong> {{ player2.nationality }}</p>
            <p><strong>Market Value:</strong> â‚¬{{ player2.market_value|default:"N/A" }}M</p>
        </div>
    </div>
</div>

<!-- Statistics Comparison -->
<div class="card">
    <div class="card-header">ğŸ“Š Season {{ season }} Statistics Comparison</div>
    
    {% if stats1 or stats2 %}
    <table>
        <thead>
            <tr>
                <th>Statistic</th>
                <th style="background: var(--color-orange-100);">{{ player1.name }}</th>
                <th style="background: var(--color-gray-400);">{{ player2.name }}</th>
                <th>Better</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Appearances</strong></td>
                <td>{{ stats1.appearances|default:"0" }}</td>
                <td>{{ stats2.appearances|default:"0" }}</td>
                <td>
                    {% if stats1.appearances > stats2.appearances %}
                        â† {{ player1.name }}
                    {% elif stats2.appearances > stats1.appearances %}
                        {{ player2.name }} â†’
                    {% else %}
                        Tie
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td><strong>Goals</strong></td>
                <td><span style="color: var(--color-orange-300); font-weight: bold;">{{ stats1.goals|default:"0" }}</span></td>
                <td><span style="color: var(--color-orange-300); font-weight: bold;">{{ stats2.goals|default:"0" }}</span></td>
                <td>
                    {% if stats1.goals > stats2.goals %}
                        â† {{ player1.name }}
                    {% elif stats2.goals > stats1.goals %}
                        {{ player2.name }} â†’
                    {% else %}
                        Tie
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td><strong>Assists</strong></td>
                <td><span style="color: var(--color-orange-300); font-weight: bold;">{{ stats1.assists|default:"0" }}</span></td>
                <td><span style="color: var(--color-orange-300); font-weight: bold;">{{ stats2.assists|default:"0" }}</span></td>
                <td>
                    {% if stats1.assists > stats2.assists %}
                        â† {{ player1.name }}
                    {% elif stats2.assists > stats1.assists %}
                        {{ player2.name }} â†’
                    {% else %}
                        Tie
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td><strong>Clean Sheets</strong></td>
                <td>{{ stats1.clean_sheets|default:"0" }}</td>
                <td>{{ stats2.clean_sheets|default:"0" }}</td>
                <td>
                    {% if stats1.clean_sheets > stats2.clean_sheets %}
                        â† {{ player1.name }}
                    {% elif stats2.clean_sheets > stats1.clean_sheets %}
                        {{ player2.name }} â†’
                    {% else %}
                        Tie
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td><strong>Minutes Played</strong></td>
                <td>{{ stats1.minutes_played|default:"0" }}</td>
                <td>{{ stats2.minutes_played|default:"0" }}</td>
                <td>
                    {% if stats1.minutes_played > stats2.minutes_played %}
                        â† {{ player1.name }}
                    {% elif stats2.minutes_played > stats1.minutes_played %}
                        {{ player2.name }} â†’
                    {% else %}
                        Tie
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td><strong>Yellow Cards</strong></td>
                <td>{{ stats1.yellow_cards|default:"0" }}</td>
                <td>{{ stats2.yellow_cards|default:"0" }}</td>
                <td>
                    {% if stats1.yellow_cards < stats2.yellow_cards %}
                        â† {{ player1.name }} (Better)
                    {% elif stats2.yellow_cards < stats1.yellow_cards %}
                        {{ player2.name }} (Better) â†’
                    {% else %}
                        Tie
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td><strong>Average Rating</strong></td>
                <td>{{ stats1.average_rating|default:"-" }}</td>
                <td>{{ stats2.average_rating|default:"-" }}</td>
                <td>
                    {% if stats1.average_rating and stats2.average_rating %}
                        {% if stats1.average_rating > stats2.average_rating %}
                            â† {{ player1.name }}
                        {% elif stats2.average_rating > stats1.average_rating %}
                            {{ player2.name }} â†’
                        {% else %}
                            Tie
                        {% endif %}
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
        </tbody>
    </table>
    {% else %}
    <p style="text-align: center; color: var(--color-gray-600); padding: 3rem;">
        No statistics available for this season. Add player statistics in the admin panel!
    </p>
    {% endif %}
</div>

<div class="text-center mt-2">
    <a href="{% url 'statisticsrafi:compare_players' %}" class="btn btn-primary">Compare Other Players</a>
    <a href="{% url 'statisticsrafi:home' %}" class="btn btn-secondary">Back to Home</a>
</div>
{% endblock %}





